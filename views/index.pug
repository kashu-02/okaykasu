doctype html
html(lang="ja")
  head
    meta(charset="UTF-8")
    title おk粕　Web版
  body
    h1 おk粕　Web版
    h1 DEBUG MODE
    div
      table
        tr
          td #{chunkrange.date}
          td #{chunkrange.chunkrange}
      table
        tr
          td #{nextstagerange.date}
          td #{nextstagerange.nextstagerange}

    div
      unless okaykasudata
        p 課題、連絡事項を表示するには学校のGoogleアカウントでのログインが必要です。
        a(href="/auth/google") ログイン
      else
          - var escapeMap = {'&':'&amp;', '\'':'&#39;', '"':'&quot;', '<':'&lt;', '>':'&gt;'};
          each okaykasudatum in okaykasudata
            if okaykasudatum.type === 'image'
              img(src=okaykasudatum.linemessage width="50%" height="50%")
            else if okaykasudatum.type === 'text'
              p !{okaykasudatum.linemessage.replace(/[&"'<>]/g,function(c){return escapeMap.hasOwnProperty(c)?escapeMap[c]:c}).replace(/\r?\n|\r/g,"<br>")}