doctype html
html(lang="ja")
  head
    meta(charset="UTF-8")
    title おk粕Web版
    meta(charset="utf-8")
    meta(name="viewport" content="width=device-width, initial-scale=1")
    link(rel="stylesheet",
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css",
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk",
    crossorigin="anonymous")
  body
    script(src="//accaii.com/okaykasu/script.js" async)
    noscript
      img(src="//accaii.com/okaykasu/script?guid=on")
      
    nav(class="navbar navbar-dark bg-dark")
      a(href="#" class="navbar-brand") おk粕Web版

    div(class="container")
      div(class="row mt-4 mb-5 justify-content-around")
        div(class="col-sm-6")
          div(class="card w-75 align-middle")
            div(class="card-header bg-success text-white")
              if chunkrange.date
                p(class="card-title d-flex align-items-center") チャンク　#{chunkrange.date}
               else
                p(class="card-title d-flex align-items-center") チャンク　取得できませんでした。
            div(class="card-body")
              if chunkrange.chunkrange
                p(class="card-text d-flex align-items-center") #{chunkrange.chunkrange}
              else
                p(class="card-text d-flex align-items-center") 取得できませんでした。

        div(class="col-sm-6")
          div(class="card w-75 align-middle")
            div(class="card-header bg-warning text-white")
              if nextstagerange.date
                p(class="card-title") ネクステ　#{nextstagerange.date}
              else
                p(class="card-title") ネクステ　取得できませんでした。
            div(class="card-body")
              if nextstagerange.nextstagerange
                p(class="card-text") #{nextstagerange.nextstagerange}
              else
                p(class="card-text") 取得できませんでした。
                

    hr

    div(class="container")
      unless okaykasudata
        p 課題、連絡事項を表示するには学校のGoogleアカウントでのログインが必要です。
        a(href="/auth/google" class="btn btn-primary") ログイン
      else
          - var escapeMap = {'&':'&amp;', '\'':'&#39;', '"':'&quot;', '<':'&lt;', '>':'&gt;'};
          each okaykasudatum in okaykasudata
            if okaykasudatum.type === 'image'
              div(class="card mb-2")
                div(class="card-body")
                  img(class="card-img" src=okaykasudatum.linemessage width="50%" height="50%")
            else if okaykasudatum.type === 'text'
              div(class="card bg-light mb-2")
                div(class="card-body")
                  p(class="card-text") !{okaykasudatum.linemessage.replace(/[&"'<>]/g,function(c){return escapeMap.hasOwnProperty(c)?escapeMap[c]:c}).replace(/\r?\n|\r/g,"<br>")}

  script(src="https://code.jquery.com/jquery-3.5.1.slim.min.js",
  integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj",
  crossorigin="anonymous")
  script(src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js",
  integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo",
  crossorigin="anonymous")
  script(src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js",
  integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI",
  crossorigin="anonymous")